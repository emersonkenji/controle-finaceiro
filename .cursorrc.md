# Sistema de Controle Financeiro

## Estrutura do Projeto

### Backend (Laravel)
```
app/
├── Http/
│   ├── Controllers/
│   │   ├── Reports/
│   │   │   ├── SalesReportController.php
│   │   │   ├── FinancialReportController.php
│   │   │   ├── InventoryReportController.php
│   │   │   ├── CustomerReportController.php
│   │   │   └── ProductReportController.php
│   │   ├── Settings/
│   │   │   ├── GeneralSettingController.php
│   │   │   ├── CompanySettingController.php
│   │   │   ├── UserController.php
│   │   │   └── BackupController.php
│   │   ├── CustomerController.php
│   │   ├── ProductController.php
│   │   ├── OrderController.php
│   │   ├── TransactionController.php
│   │   └── EmployeeController.php
│   ├── Middleware/
│   └── Requests/
├── Models/
└── Services/

```

### Frontend (React + Inertia)
```
resources/
├── js/
│   ├── Components/
│   │   ├── Forms/
│   │   ├── Tables/
│   │   ├── Charts/
│   │   ├── Layout/
│   │   └── UI/
│   ├── Pages/
│   │   ├── Reports/
│   │   │   ├── Sales/
│   │   │   ├── Financial/
│   │   │   ├── Inventory/
│   │   │   ├── Customers/
│   │   │   └── Products/
│   │   ├── Settings/
│   │   ├── Customers/
│   │   ├── Products/
│   │   ├── Orders/
│   │   └── Employees/
│   ├── Layouts/
│   │   ├── AuthenticatedLayout.jsx
│   │   └── GuestLayout.jsx
│   └── app.jsx
└── views/
    └── app.blade.php
```

## Rotas

### Relatórios
```php
Route::middleware(['auth', 'verified'])->prefix('reports')->name('reports.')->group(function () {
    // Rota principal
    Route::get('/', [ReportController::class, 'index'])->name('index');

    // Relatórios específicos
    Route::get('/sales', [SalesReportController::class, 'index'])->name('sales.index');
    Route::get('/financial', [FinancialReportController::class, 'index'])->name('financial.index');
    Route::get('/inventory', [InventoryReportController::class, 'index'])->name('inventory.index');
    Route::get('/customers', [CustomerReportController::class, 'index'])->name('customers.index');
    Route::get('/products', [ProductReportController::class, 'index'])->name('products.index');

    // Rotas com parâmetros
    Route::get('/{report}', [ReportController::class, 'show'])->name('show');
    Route::get('/{report}/download', [ReportController::class, 'download'])->name('download');
});
```

### Configurações
```php
Route::middleware(['auth', 'verified'])->prefix('settings')->name('settings.')->group(function () {
    Route::get('general', [GeneralSettingController::class, 'index'])->name('general.index');
    Route::get('company', [CompanySettingController::class, 'index'])->name('company.index');
    Route::resource('users', UserController::class);
    Route::resource('backup', BackupController::class);
});
```

## Comandos Importantes

### Desenvolvimento
```bash
# Iniciar servidor de desenvolvimento
npm run dev

# Compilar assets
npm run build

# Limpar cache e recompilar
php artisan optimize:clear && php artisan ziggy:generate && npm run build

# Migrations
php artisan migrate
php artisan migrate:fresh --seed
```

### Produção
```bash
# Otimizar para produção
php artisan optimize
php artisan route:cache
php artisan view:cache
php artisan config:cache

# Compilar assets para produção
npm run build
```

## Configurações

### Ziggy (Rotas no Frontend)
- Arquivo: `resources/js/app.jsx`
- Configuração:
```javascript
import { route } from 'ziggy-js';
window.route = route;
```

### Inertia.js
- Layout Principal: `resources/js/Layouts/AuthenticatedLayout.jsx`
- Configuração: `resources/js/app.jsx`

### Vite
- Configuração: `vite.config.js`
- Plugins: `@vitejs/plugin-react`, `laravel-vite-plugin`

## Padrões de Código

### Controllers
- Usar Resource Controllers quando possível
- Manter lógica de negócios em Services
- Retornar respostas Inertia para views

### Views (React)
- Componentes reutilizáveis em `Components/`
- Páginas em `Pages/`
- Usar TypeScript para melhor tipagem

### Rotas
- Agrupar por funcionalidade
- Usar middleware auth e verified
- Manter rotas específicas antes das rotas com parâmetros

## Melhorias Planejadas

### Performance
- [ ] Implementar cache para relatórios
- [ ] Otimizar queries do banco de dados
- [ ] Lazy loading de componentes React

### Segurança
- [ ] Implementar autenticação 2FA
- [ ] Adicionar logs de auditoria
- [ ] Revisar permissões de usuários

### UX/UI
- [ ] Melhorar feedback de loading
- [ ] Adicionar mais filtros nos relatórios
- [ ] Implementar temas dark/light

### DevOps
- [ ] Configurar CI/CD
- [ ] Implementar testes automatizados
- [ ] Melhorar processo de backup

# .cursorrc.md

## Módulo 1: Configuração do Ambiente e Estrutura Base

### 1.1 Configuração Inicial
- Instalação do Laravel 10
- Configuração do Breeze com Inertia + Vite
- Instalação e configuração do TailwindCSS
- Configuração do shadcn/ui
- Estruturação do banco de dados

### 1.2 Setup do Tema
- Implementação do modo escuro/claro
- Configuração das cores do sistema
- Customização dos componentes shadcn/ui
- Criação do layout base responsivo
- Implementação do menu lateral

## Módulo 2: Autenticação e Controle de Acesso

### 2.1 Sistema de Autenticação
- Customização do Breeze
- Implementação de 2FA
- Recuperação de senha
- Verificação de email

### 2.2 Controle de Acesso
- Implementação de roles e permissions
- Middleware de autorização
- Gates e Policies
- Menu dinâmico baseado em permissões

## Módulo 3: Dashboard e Componentes Base

### 3.1 Dashboard Principal
- Layout com shadcn/ui
- Implementação de cards de KPIs
- Integração com Recharts para gráficos
- Componentes reutilizáveis

### 3.2 Componentes Globais
- Sistema de notificações
- Breadcrumbs dinâmicos
- Pesquisa global
- Filtros avançados

## Módulo 4: Gestão de Clientes

### 4.1 CRUD de Clientes
- Formulário de cadastro com validações
- Integração com ViaCEP
- Máscara para campos (CPF, telefone)
- Upload e gestão de documentos

### 4.2 Histórico e Relacionamento
- Histórico de compras
- Histórico de pagamentos
- Documentos anexados
- Observações e notas

## Módulo 5: Gestão de Produtos

### 5.1 Cadastro de Produtos
- Categorias e subcategorias
- Variações de produtos
- Gestão de estoque
- Imagens e galeria

### 5.2 Precificação e Custos
- Preço de custo
- Preço de venda
- Margens de lucro
- Promoções e descontos

### 5.3 Controle de Estoque
- Entrada de produtos
- Saída de produtos
- Ajustes de estoque
- Alertas de estoque baixo

## Módulo 6: Gestão Financeira

### 6.1 Contas a Pagar
- Cadastro de fornecedores
- Lançamento de despesas
- Agendamento de pagamentos
- Categorização de despesas

### 6.2 Contas a Receber
- Faturamento
- Controle de recebimentos
- Contas em atraso
- Notificações automáticas

### 6.3 Fluxo de Caixa
- Entradas e saídas
- Projeções financeiras
- Conciliação bancária
- Centro de custos

### 6.4 DRE
- Receitas
- Despesas
- Lucro/Prejuízo
- Análises comparativas

## Módulo 7: Vendas e PDV

### 7.1 PDV (Frente de Caixa)
- Interface intuitiva
- Busca rápida de produtos
- Desconto por item/total
- Múltiplas formas de pagamento

### 7.2 Gestão de Pedidos
- Orçamentos
- Pedidos de venda
- Status de pedidos
- Histórico de vendas

### 7.3 Comissões
- Cálculo de comissões
- Metas de vendedores
- Relatórios de desempenho
- Pagamento de comissões

## Módulo 8: Funcionários

### 8.1 Gestão de Funcionários
- Cadastro completo
- Cargos e funções
- Permissões de acesso
- Histórico profissional

### 8.2 Desempenho
- Metas individuais
- Avaliações
- Histórico de vendas
- Comissões

## Módulo 9: Relatórios

### 9.1 Relatórios de Vendas
- Vendas por período
- Vendas por vendedor
- Produtos mais vendidos
- Ticket médio

### 9.2 Relatórios Financeiros
- DRE
- Fluxo de caixa
- Inadimplência
- Projeções

### 9.3 Relatórios de Estoque
- Produtos em baixa
- Giro de estoque
- Validade de produtos
- Inventário

### 9.4 Relatórios de Clientes
- Clientes mais ativos
- Inadimplência
- Histórico de compras
- Segmentação

### 9.5 Relatórios de Produtos
- Lucratividade por produto
- Curva ABC
- Estoque mínimo
- Produtos sem giro

## Módulo 10: Configurações

### 10.1 Configurações Gerais
- Dados da empresa
- Configurações fiscais
- Personalização do sistema
- Backup e restauração

### 10.2 Usuários e Permissões
- Gestão de usuários
- Grupos de acesso
- Logs de atividades
- Políticas de senha

### 10.3 Integrações
- API REST
- Webhooks
- Integrações com terceiros
- Documentação da API

## Módulo 11: Backup e Segurança

### 11.1 Backup
- Backup automático
- Backup manual
- Restauração de dados
- Histórico de backups

### 11.2 Segurança
- Logs de acesso
- Auditoria de ações
- Proteção contra ataques
- Políticas de segurança

## Módulo 12: API e Integrações

### 12.1 API REST
- Endpoints RESTful
- Autenticação via token
- Rate limiting
- Documentação Swagger

### 12.2 Webhooks
- Configuração de webhooks
- Eventos disponíveis
- Logs de envio
- Retry em falhas

## Módulo 13: Melhorias e Otimizações

### 13.1 Performance
- Cache de consultas
- Otimização de imagens
- Lazy loading
- Minificação de assets

### 13.2 UX/UI
- Temas personalizados
- Responsividade
- Acessibilidade
- Feedback visual

### 13.3 DevOps
- CI/CD
- Monitoramento
- Logs centralizados
- Ambiente de staging

# Configuração do Projeto

## Estrutura do Projeto
- Laravel (Backend)
- React + Inertia.js (Frontend)
- Ziggy (Gerenciamento de Rotas)
- Vite (Build Tool)

## Configurações Importantes

### 1. Configuração do Ziggy
- Instalação: `npm install ziggy-js`
- Geração de rotas: `php artisan ziggy:generate`
- Arquivo de configuração em `resources/js/app.js`

### 2. Configuração do Inertia
- Layout principal em `resources/views/app.blade.php`
- Componentes React em `resources/js/Pages`
- Layouts em `resources/js/Layouts`

### 3. Configuração do Vite
- Arquivo de configuração: `vite.config.js`
- Scripts de desenvolvimento: `npm run dev`
- Scripts de produção: `npm run build`

## Comandos Úteis

```bash
# Limpar cache e recompilar
php artisan optimize:clear
php artisan ziggy:generate
npm run build

# Desenvolvimento
npm run dev

# Produção
npm run build
php artisan serve
```

## Melhorias Sugeridas

1. **Performance**
   - Implementar lazy loading para componentes grandes
   - Utilizar React.memo para componentes que não precisam re-renderizar frequentemente
   - Implementar cache de rotas do Ziggy

2. **Segurança**
   - Implementar CSRF protection em todas as rotas
   - Adicionar validação de entrada em todos os formulários
   - Implementar rate limiting em APIs sensíveis

3. **UX/UI**
   - Adicionar feedback visual para ações do usuário
   - Implementar loading states
   - Melhorar responsividade

4. **Código**
   - Implementar TypeScript para melhor tipagem
   - Adicionar testes automatizados
   - Implementar Husky para hooks de git

5. **DevOps**
   - Configurar CI/CD
   - Implementar monitoramento de erros
   - Adicionar logging estruturado

## Estrutura de Diretórios Recomendada

```
resources/
├── js/
│   ├── Components/      # Componentes reutilizáveis
│   ├── Layouts/        # Layouts da aplicação
│   ├── Pages/          # Páginas da aplicação
│   ├── Services/       # Serviços e APIs
│   ├── Utils/          # Funções utilitárias
│   └── app.js          # Entrada principal
├── css/
│   └── app.css         # Estilos globais
└── views/
    └── app.blade.php   # Template principal
```

